<section id="projects" class="cv-section">
  <div class="cv-card p-8" data-aos="cv-fade-up" data-aos-delay="800">
    <h2 class="cv-section-title">Proyectos Destacados</h2>
    
    <!-- Loading State -->
    <div *ngIf="isLoading" class="animate-pulse">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <div *ngFor="let item of [1,2,3,4,5,6]" class="cv-card p-6">
          <div class="h-6 bg-gray-200 rounded w-2/3 mb-2"></div>
          <div class="h-4 bg-gray-200 rounded w-full mb-4"></div>
          <div class="flex gap-2 mb-4">
            <div class="h-6 bg-gray-200 rounded w-16"></div>
            <div class="h-6 bg-gray-200 rounded w-16"></div>
            <div class="h-6 bg-gray-200 rounded w-16"></div>
          </div>
          <div class="flex gap-2">
            <div class="h-8 bg-gray-200 rounded w-16"></div>
            <div class="h-8 bg-gray-200 rounded w-16"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Content -->
    <div *ngIf="!isLoading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Each Project -->
      <div *ngFor="let project of projects; let i = index" 
           class="cv-card p-6 cv-hover-lift group"
           data-aos="cv-zoom-in" 
           [attr.data-aos-delay]="(i * 100) + 900">
        
        <!-- Project Header -->
        <div class="mb-4">
          <div class="flex items-start justify-between mb-2">
            <h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-200 flex items-center gap-2">
              <span>{{ getProjectTypeIcon(project.type) }}</span>
              {{ project.title }}
            </h3>
            <div *ngIf="project.status" 
                 class="px-2 py-1 rounded-full text-xs font-medium"
                 [class]="getProjectStatusColor(project.status)">
              {{ project.status }}
            </div>
          </div>
          
          <!-- Project Period -->
          <div *ngIf="project.startDate" class="text-sm text-gray-500 mb-2">
            {{ project.startDate }} 
            <span *ngIf="project.endDate"> - {{ project.endDate }}</span>
            <span *ngIf="!project.endDate"> - En Desarrollo</span>
          </div>
        </div>
        
        <!-- Project Description -->
        <p class="text-gray-600 text-sm mb-4 leading-relaxed">
          {{ project.description }}
        </p>
        
        <!-- Key Features -->
        <div *ngIf="project.features && project.features.length > 0" class="mb-4">
          <h4 class="text-sm font-semibold text-gray-800 mb-2">CaracterÃ­sticas Clave:</h4>
          <ul class="space-y-1">
            <li *ngFor="let feature of project.features.slice(0, 3)" 
                class="flex items-start gap-2 text-xs text-gray-600">
              <span class="text-blue-500 mt-0.5 flex-shrink-0">â–¸</span>
              <span>{{ feature }}</span>
            </li>
          </ul>
          <div *ngIf="project.features.length > 3" class="text-xs text-gray-500 mt-1">
            +{{ project.features.length - 3 }} mÃ¡s...
          </div>
        </div>
        
        <!-- Technologies -->
        <div class="flex flex-wrap gap-2 mb-4">
          <span *ngFor="let tech of project.technologies.slice(0, 5)" 
                class="cv-badge cv-badge-secondary hover:bg-gray-200 transition-colors duration-200 cursor-default">
            {{ tech }}
          </span>
          <span *ngIf="project.technologies.length > 5" 
                class="cv-badge bg-gray-200 text-gray-500">
            +{{ project.technologies.length - 5 }}
          </span>
        </div>
        
        <!-- Project Links -->
        <div class="flex gap-2 pt-2">
          <button *ngIf="project.demoUrl" 
                  class="cv-btn-primary text-sm px-3 py-2 group/btn"
                  (click)="onProjectDemo(project)">
            <span class="mr-1 transition-transform group-hover/btn:scale-110">ðŸš€</span>
            Demo
          </button>
          <button *ngIf="project.githubUrl" 
                  class="cv-btn-secondary text-sm px-3 py-2 group/btn"
                  (click)="onProjectGithub(project)">
            <span class="mr-1 transition-transform group-hover/btn:scale-110">ðŸ’»</span>
            CÃ³digo
          </button>
          <div *ngIf="!project.demoUrl && !project.githubUrl" 
               class="text-xs text-gray-400 flex items-center">
            <span class="mr-1">ðŸ”’</span>
            Proyecto Privado
          </div>
        </div>
        
        <!-- Project Metrics (if available) -->
        <div *ngIf="project.metrics" class="mt-4 pt-4 border-t border-gray-100">
          <div class="grid grid-cols-2 gap-2 text-center">
            <div *ngFor="let metric of project.metrics" class="space-y-1">
              <div class="text-sm font-semibold text-gray-700">{{ metric.value }}</div>
              <div class="text-xs text-gray-500">{{ metric.label }}</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Empty State -->
      <div *ngIf="projects.length === 0" 
           class="col-span-full text-center py-12"
           data-aos="cv-fade-up" 
           data-aos-delay="900">
        <div class="text-6xl mb-4">ðŸ’¼</div>
        <h3 class="text-xl font-semibold text-gray-700 mb-2">No hay proyectos disponibles</h3>
        <p class="text-gray-500">Los proyectos se mostrarÃ¡n prÃ³ximamente.</p>
      </div>
    </div>
    
    <!-- Projects Summary -->
    <div *ngIf="projects.length > 0" class="mt-8 pt-6 border-t border-gray-200">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="space-y-1">
          <div class="text-2xl font-bold text-blue-600">{{ projects.length }}</div>
          <div class="text-sm text-gray-600">Proyectos</div>
        </div>
        <div class="space-y-1">
          <div class="text-2xl font-bold text-green-600">{{ getCompletedProjects() }}</div>
          <div class="text-sm text-gray-600">Completados</div>
        </div>
        <div class="space-y-1">
          <div class="text-2xl font-bold text-orange-600">{{ getActiveProjects() }}</div>
          <div class="text-sm text-gray-600">Activos</div>
        </div>
        <div class="space-y-1">
          <div class="text-2xl font-bold text-purple-600">{{ getTotalTechnologies() }}</div>
          <div class="text-sm text-gray-600">TecnologÃ­as</div>
        </div>
      </div>
    </div>
  </div>
</section>
