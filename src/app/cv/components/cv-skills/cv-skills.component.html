<section id="skills" class="cv-section">
  <div class="cv-card p-8" data-aos="cv-fade-up" data-aos-delay="600">
    <h2 class="cv-section-title">Habilidades TÃ©cnicas</h2>
    
    <!-- Loading State -->
    <div *ngIf="isLoading" class="animate-pulse">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div *ngFor="let item of [1,2]" class="space-y-4">
          <div class="h-6 bg-gray-200 rounded w-1/3 mb-4"></div>
          <div *ngFor="let skill of [1,2,3,4]" class="space-y-2">
            <div class="flex justify-between">
              <div class="h-4 bg-gray-200 rounded w-1/2"></div>
              <div class="h-4 bg-gray-200 rounded w-12"></div>
            </div>
            <div class="h-2.5 bg-gray-200 rounded-full"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Content -->
    <div *ngIf="!isLoading" class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Each Skill Category -->
      <div *ngFor="let category of skills; let categoryIndex = index" 
           class="cv-spacing-md"
           [attr.data-aos]="categoryIndex % 2 === 0 ? 'cv-slide-right' : 'cv-slide-left'" 
           [attr.data-aos-delay]="(categoryIndex * 200) + 700">
        
        <!-- Category Title -->
        <div class="mb-6">
          <h3 class="text-xl font-semibold text-gray-900 mb-2 flex items-center gap-2">
            <span class="w-2 h-6 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full"></span>
            {{ category.category }}
          </h3>
          <div class="text-sm text-gray-500">{{ category.skills.length }} habilidades</div>
        </div>
        
        <!-- Skills in Category -->
        <div class="cv-spacing-sm">
          <div *ngFor="let skill of category.skills; let skillIndex = index" 
               class="mb-4 group">
            
            <!-- Skill Header -->
            <div class="flex justify-between items-center mb-2">
              <div class="flex items-center gap-3">
                <!-- Technology Icon -->
                <div class="w-6 h-6 flex items-center justify-center">
                  <span class="text-lg">{{ getTechnologyIcon(skill.name) }}</span>
                </div>
                <span class="text-gray-700 font-medium group-hover:text-blue-600 transition-colors duration-200">
                  {{ skill.name }}
                </span>
                <!-- Years of Experience -->
                <span *ngIf="skill.years" class="text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded-full">
                  {{ skill.years }} aÃ±o{{ skill.years > 1 ? 's' : '' }}
                </span>
              </div>
              <div class="flex items-center gap-2">
                <span class="text-sm text-gray-500">{{ skill.level }}%</span>
                <span class="text-xs px-2 py-1 bg-gray-100 rounded-full text-gray-600">
                  {{ getSkillLevelText(skill.level) }}
                </span>
              </div>
            </div>
            
            <!-- Progress Bar Container -->
            <div class="cv-progress-bar group-hover:shadow-sm transition-shadow duration-200">
              <div 
                class="cv-progress-fill bg-gradient-to-r transition-all duration-1000 ease-out"
                [class]="getSkillColorClass(skill.level)"
                [style.width.%]="animatedSkills[category.category + '-' + skill.name] ? skill.level : 0">
                
                <!-- Skill Level Indicator -->
                <div class="absolute right-2 top-0 bottom-0 flex items-center">
                  <div *ngIf="animatedSkills[category.category + '-' + skill.name] && skill.level >= 75" 
                       class="w-2 h-2 bg-white rounded-full opacity-80"></div>
                </div>
              </div>
            </div>
            
            <!-- Skill Description (if available) -->
            <div *ngIf="skill.description" class="mt-1">
              <p class="text-xs text-gray-500 italic">{{ skill.description }}</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Empty State -->
      <div *ngIf="skills.length === 0" 
           class="col-span-full text-center py-12"
           data-aos="cv-fade-up" 
           data-aos-delay="700">
        <div class="text-6xl mb-4">ðŸŽ¯</div>
        <h3 class="text-xl font-semibold text-gray-700 mb-2">No hay habilidades disponibles</h3>
        <p class="text-gray-500">La informaciÃ³n de habilidades se cargarÃ¡ prÃ³ximamente.</p>
      </div>
    </div>
    
    <!-- Skills Summary (if needed) -->
    <div *ngIf="skills.length > 0" class="mt-8 pt-6 border-t border-gray-200">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="space-y-1">
          <div class="text-2xl font-bold text-blue-600">{{ getTotalSkills() }}</div>
          <div class="text-sm text-gray-600">Total Skills</div>
        </div>
        <div class="space-y-1">
          <div class="text-2xl font-bold text-green-600">{{ getExpertSkills() }}</div>
          <div class="text-sm text-gray-600">Expert Level</div>
        </div>
        <div class="space-y-1">
          <div class="text-2xl font-bold text-purple-600">{{ skills.length }}</div>
          <div class="text-sm text-gray-600">Categories</div>
        </div>
        <div class="space-y-1">
          <div class="text-2xl font-bold text-orange-600">{{ getAverageSkillLevel() }}%</div>
          <div class="text-sm text-gray-600">Avg Level</div>
        </div>
      </div>
    </div>
  </div>
</section>
